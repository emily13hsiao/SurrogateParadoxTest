# Read in files after running on server

surrogate <- "HBA1" # CHDL or HBA1

# the reason I need to do this is because I split the monotonicity test samples
# into 10 batches, so we need to extract this information.

mono0_samples <- c()
mono1_samples <- c()
for (batch.num in 1:10) {
  filename <- paste0(surrogate, "batch", batch.num, ".RDS")
  results <- readRDS(filename)
  samples0 <- results$monotonicity0_result$T_m_samples
  samples1 <- results$monotonicity1_result$T_m_samples
  mono0_samples <- append(mono0_samples, samples0)
  mono1_samples <- append(mono1_samples, samples1)
}
Tm0 <- results$monotonicity0_result$T_m_value
Tm1 <- results$monotonicity1_result$T_m_value

control_p <- mean(Tm0 < mono0_samples)
treatment_p <- mean(Tm1 < mono1_samples)
control_p; treatment_p






